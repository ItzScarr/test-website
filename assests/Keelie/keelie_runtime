from js import window
import asyncio

import keelie  # assets/keelie/keelie.py

BASE_PATH = "/assets/keelie"  # change to "/repo-name/assets/keelie" for project pages

async def send_message():
    msg = (window.keelieGetInput() or "").strip()
    if not msg:
        return

    window.keelieClearInput()
    window.keelieAddBubble("You", msg)

    window.keelieSetTyping(True)
    await asyncio.sleep(0.15)  # small UX delay

    reply = keelie.keelie_reply(msg)
    window.keelieSetTyping(False)
    window.keelieAddBubble("Keelie", reply)

async def boot():
    await keelie.load_stock_json(BASE_PATH)
    window.keelieSend = send_message

await boot()
